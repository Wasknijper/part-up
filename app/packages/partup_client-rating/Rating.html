<template name="Rating">
    <div class="pu-rating">
        <figure class="pu-avatar pu-avatar-large" style="{{#with upper.profile.image }}background-image: url('{{ partupImageUrl id=. store='360x360' }}');{{/with }}"></figure>
        {{# if canEdit }}
            {{# autoForm schema=formSchema id=generateFormId class='pu-form' doc=rating }}
                {{> afFieldInput type='range' name='rating' class='pu-slider' }}
                {{> afFieldInput name='feedback' class='pu-textarea' placeholder=placeholders.feedback rows=2 }}

                <footer>
                    <button type="submit" class="pu-button {{# if saving }}pu-state-loading pu-state-disabled{{/ if }}">
                        {{_ 'rating-form-feedback-save' }}
                        {{> Spinner color='inverted' type='small' }}
                    </button>
                </footer>
            {{/ autoForm }}
        {{ else }}
            <span class="pu-sub-rating"><span style="width: {{ rating.rating }}%"></span></span>
            {{ rating.feedback }}
        {{/ if }}
    </div>
</template>
