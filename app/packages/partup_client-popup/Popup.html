<template name="Popup">
    <section class="pu-overlay {{#if currentPopup}}pu-overlay-active{{/if}}" data-overlay-dismiss>
        {{#if partupEquals type 'gallery'}}
            <article class="pu-imagegallery {{#unless finishedLoading}}pu-imagegallery-loading{{/unless}}">
                <ul class="pu-list pu-list-horizontal" data-scroller scrollleft="{{ imageIndex }}">
                    {{> yield region="PopupContent" }}
                </ul>
                <nav data-dismiss>
                    <a href="#"><i class="picon-times"></i></a>
                    {{#if overflowing}}
                        {{#if finishedLoading}}
                            {{#unless galleryStart }}
                                <a href="#" data-left><i class="picon-caret-slim-left"></i></a>
                            {{/unless}}
                            {{#unless galleryEnd }}
                                <a href="#" data-right><i class="picon-caret-slim-right"></i></a>
                            {{/unless}}
                        {{/if}}
                    {{/if}}
                    {{#unless finishedLoading}}
                        {{> Loader COLOR='white'}}
                    {{/unless}}
                </nav>
            </article>
        {{else}}
            <article class="pu-popup">
                <header>
                    <h4>
                        {{> yield region="PopupTitle" }}
                    </h4>
                    <button class="pu-button pu-button-close" data-dismiss><i class="picon-times"></i></button>
                </header>
                <article>
                    {{> yield region="PopupContent" }}
                </article>
            </article>
        {{/if}}
    </section>
</template>
