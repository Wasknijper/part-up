<template name="app_network_joinbutton">
    {{# if network.hasMember currentUser._id }}
        <a class="pu-button pu-button-gray" href="#" data-leave>
            {{_ 'pages-app-network-actions-button-leave'}}
        </a>
    {{ else }}
        {{# if network.canUpperJoin currentUser._id }}
            {{# if network.isUpperInvitePending currentUserId }}
                <a href="#" class="pu-button pu-button-gray pu-button-disabled pu-button-disabled-orange" data-blank>
                    {{_ 'pages-app-network-actions-button-pending' }}
                </a>
            {{ else }}
                {{# if network.isUpperInvited currentUserId }}
                    <a href="#" class="pu-button" data-accept>
                        {{_ 'pages-app-network-actions-button-accept'}}
                    </a>
                {{ else }}
                    <a href="#" class="pu-button" data-join>
                        {{_ 'pages-app-network-actions-button-join'}}
                    </a>
                {{/ if }}
            {{/ if }}
        {{ else }}
            {{# if network.isUpperPending currentUser._id }}
                <a href="#" class="pu-button pu-button-gray pu-button-disabled pu-button-disabled-orange" data-blank>
                    {{_ 'pages-app-network-actions-button-pending' }}
                </a>
            {{ else }}
                {{#if network.accessToken}}
                    <a href="#" class="pu-button" data-accept>
                        {{_ 'pages-app-network-actions-button-accept'}}
                    </a>
                {{ else }}
                    <a href="#" class="pu-button" data-request-invite>
                        {{_ 'pages-app-network-actions-button-request_access' }}
                    </a>
                {{/if}}
            {{/ if }}
        {{/ if}}
    {{/ if}}
</template>
