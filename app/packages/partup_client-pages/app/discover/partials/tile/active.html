<template name="PartupTile_active">
    <section>
        <!-- Image (circle), uppers, and progress  -->
        <div class="pu-partupcircle">
            <a href="{{pathFor 'partup' slug=slug }}" class="pu-sub-partuplink">
                {{# with boundedProgress }}<canvas class="pu-sub-radial" data-percent="{{ . }}"></canvas>{{/ with }}
                <figure class="pu-sub-inner" style="
                    {{# with partupGetImageUrl imageObject '360x360' }}background-image: url('{{ . }}');{{/ with }}
                " data-partup-tile-focuspoint></figure>
            </a>

            <!-- Uppers -->
            {{# if avatars }}
                <ul class="pu-sub-avatar-list">
                    {{# each avatars }}
                        {{# if data.upper }}
                             <li style="
                                {{# with avatarPosition }}
                                    -webkit-transform: translate3d({{x}}px, {{y}}px, 0);
                                    -moz-transform: translate3d({{x}}px, {{y}}px, 0);
                                    transform: translate3d({{x}}px, {{y}}px, 0);
                                    transition-delay: {{ delay }}s;
                                {{/ with }}
                            " data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ data.upper._id }}">
                                <a href="{{ pathFor 'profile' _id=data.upper._id }}" class="pu-avatar pu-avatar-partuptile">
                                    <img src="{{ partupGetImageUrl data.upper.profile.imageObject '80x80' }}" alt="" class="pu-sub-image">
                                </a>
                            </li>
                        {{ else }}
                            <li class="pu-avatar pu-avatar-more" style="
                                {{# with avatarPosition }}
                                    -webkit-transform: translate3d({{x}}px, {{y}}px, 0);
                                    -moz-transform: translate3d({{x}}px, {{y}}px, 0);
                                    transform: translate3d({{x}}px, {{y}}px, 0);
                                    transition-delay: {{ delay }}s;
                                {{/ with }}
                            ">{{ data.remainingUppers }}</li>
                        {{/ if }}
                    {{/ each }}
                </ul>
            {{/ if }}
        </div>
        <!-- Description -->
        <p>{{ description }}</p>

        <ul class="pu-sub-partup-stats">
            <li>
                <strong>{{ activityCount }}</strong>
                <span>{{_ 'partuptile-activities' }}</span>
            </li>
            <li>
                <strong>{{ supporterCount }}</strong>
                <span>{{_ 'partuptile-supporters' }}</span>
            </li>
            <li>
                <strong>{{ dayCount }}</strong>
                <span>{{_ 'partuptile-days-active' }}</span>
            </li>
        </ul>
    </section>
</template>
