<template name="modal_swarm_settings_quotes_form">
    {{#autoForm id=form.id schema=form.schema doc=form.doc validation="submitThenKeyup" class="pu-form pu-block pu-block-active"}}
        <label class="pu-formfield">
            <span class="pu-label">
                {{_ 'modal-swarm-quotes-form-quote-label'}}
                <a class="pu-hint">
                    {{# if partupLowerThan state.charactersLeft 180 }}
                        {{_ 'modal-swarm-quotes-form-quote-characters-left' state.charactersLeft }}
                    {{ else }}
                        {{_ 'modal-swarm-quotes-form-quote-characters' 180 }}
                    {{/ if }}
                </a>
            </span>

            <div class="pu-sub-validations {{# if afFieldIsInvalid name='content' }}pu-state-invalid{{/ if }}">
                <span class="pu-sub-input">
                    {{> afFieldInput
                        name='content'
                        class='pu-textarea'
                        placeholder=static.quoteFieldPlaceholder
                        rows=3
                        data-max=180
                        data-characters-left-var="charactersLeft"
                    }}
                </span>
                <span class="pu-sub-error">{{ afFieldMessage name='content' }}</span>
            </div>
        </label>

        <label class="pu-formfield">
            <span class="pu-label">
                {{_ 'modal-swarm-quotes-form-author-label'}}
            </span>

            <div class="pu-sub-validations {{# if afFieldIsInvalid name='author_id' }}pu-state-invalid{{/ if }}">
                <span class="pu-sub-input">

                    {{# AutocompleteAdvanced
                    placeholder=static.authorFieldPlaceholder
                    label=form.authorLabel
                    selection=form.authorSelectionReactiveVar
                    onQuery=form.authorQuery
                    formValue=form.authorFormvalue }}

                        {{> afFieldInput name='author_id' }}

                    {{/ AutocompleteAdvanced }}
                </span>
                <span class="pu-sub-error">{{ afFieldMessage name='author_id' }}</span>
            </div>
        </label>
        <footer class="pu-sub-formfooter pu-row pu-row-scalable">

                <div class="cell">
                    <button type="submit" class="pu-button {{# if submitting }}pu-state-loading pu-state-disabled{{/ if }}">
                        <span>{{_ 'modal-swarm-quotes-form-button-save'}}</span>
                        {{> Spinner color='inverted' type='small' }}
                    </button>
                </div>
                <div class="cell stretch"><button type="button" class="pu-button pu-button-gray" data-close>{{_ 'modal-swarm-quotes-form-button-close'}}</button></div>

                <div class="cell">
                    <a class="pu-button pu-button-text pu-button-text-subtle" data-remove>{{_ 'modal-swarm-quotes-form-button-remove'}}</a>
                </div>

        </footer>
    {{/autoForm}}
</template>
