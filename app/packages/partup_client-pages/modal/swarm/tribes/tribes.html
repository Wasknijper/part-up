<template name="modal_swarm_settings_tribes">
    <div class="pu-composition pu-composition-defaultmodal">
        <h2 class="pu-title pu-title-modal">{{_ 'modal-swarm-tribes-title-page' }}</h2>
        <p>{{_ 'modal-swarm-tribes-paragraph-intro' }}</p>
        {{#autoForm schema=form.schema id="addNetworkForm" validation="submitThenKeyup" class="pu-form pu-block pu-block-highlighted" }}

            <label class="pu-formfield">
                <span class="pu-label">
                    {{_ 'modal-swarm-tribes-form-add-label'}}
                </span>

                <span class="pu-sub-input">
                    {{# AutocompleteAdvanced
                    placeholder=translations.networkFieldPlaceholder
                    label=form.networkLabel
                    selection=form.networkSelectionReactiveVar
                    onQuery=form.networkQuery
                    onSelect=form.onSelect
                    formValue=form.networkFormvalue
                    selectorAttribute='data-focus-input' }}

                        <input type="text" name="network">

                    {{/ AutocompleteAdvanced }}
                </span>
            </label>

            <footer class="pu-row">
                <div class="cell">
                    <button class="pu-button {{# if state.submitting }}pu-state-loading{{/ if }} {{# unless form.networkSelectionReactiveVar.get }}pu-state-disabled{{/ unless }}" data-submitbutton>
                        {{_ 'modal-swarm-tribes-form-button-submit'}}
                        {{> Spinner type='small' color='inverted' }}
                    </button>
                </div>
            </footer>
        {{/autoForm}}
        <div class="pu-formfield">
            <span class="pu-label pu-label-light">
                {{_ 'modal-swarm-tribes-list-label'}}
                <a class="pu-hint">
                    {{# if partupLowerThan data.networksLeft form.networksMax }}
                        {{_ 'modal-swarm-tribes-form-tribes-list-left' data.networksLeft }}
                    {{ else }}
                        {{_ 'modal-swarm-tribes-form-tribes-list' form.networksMax }}
                    {{/ if }}
                </a>
            </span>

            <ul class="pu-list">
                {{#each data.networks}}
                    <li class="pu-networkitem">
                        <figure class="pu-avatar pu-avatar-square pu-avatar-medium pu-avatar-border" style="background-image: url('{{ partupImageUrl id=image }}');"></figure>
                        <div>
                            <a href="{{pathFor 'network' slug }}">{{ name }}</a>
                            <button type="button" class="pu-sub-remove pu-button pu-button-checkmark pu-button-checkmark-deny" data-removenetwork> <i class="picon-times"></i> </button>
                        </div>
                    </li>
                {{/each}}
            </ul>
        </div>
    </div>
</template>
